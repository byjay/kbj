@echo off
REM KBJ2 Supabase ìë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
REM ì‹¤í–‰ ì „: Supabase CLI ì„¤ì¹˜ í•„ìš” (winget install Supabase.CLI)

echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   ğŸš€ KBJ2 Supabase ìë™ ë°°í¬
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

REM 1. í˜„ì¬ ë””ë ‰í† ë¦¬ í™•ì¸
cd /d "%~dp0"
echo ğŸ“ í˜„ì¬ ìœ„ì¹˜: %CD%
echo.

REM 2. Git ìƒíƒœ í™•ì¸ ë° í‘¸ì‹œ
echo ğŸ“Š Git ìƒíƒœ í™•ì¸...
git status
echo.

echo ğŸ“¤ ë³€ê²½ì‚¬í•­ì„ GitHubì— í‘¸ì‹œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Y/N)
set /p PUSH=
if /i "%PUSH%"=="Y" (
    git add .
    git commit -m "Update KBJ2 for Supabase deployment"
    git push origin main
    echo âœ… í‘¸ì‹œ ì™„ë£Œ!
    echo.
)

REM 3. Supabase ë¡œê·¸ì¸ ì•ˆë‚´
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   1ë‹¨ê³„: Supabase CLI ë¡œê·¸ì¸
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”...
echo.
supabase login
echo.

REM 4. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   2ë‹¨ê³„: í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo Supabase Dashboardì—ì„œ í”„ë¡œì íŠ¸ REFë¥¼ í™•ì¸í•˜ì„¸ìš”:
echo https://supabase.com/dashboard/org/qrchejbxffozzqmsbvxb
echo.
set /p PROJECT_REF="í”„ë¡œì íŠ¸ REF ì…ë ¥ (ì˜ˆ: abc123def456): "
echo.

REM 5. í”„ë¡œì íŠ¸ ë§í¬
echo ğŸ”— í”„ë¡œì íŠ¸ ë§í¬ ì¤‘...
supabase link --project-ref %PROJECT_REF%
echo.

REM 6. API í‚¤ ì…ë ¥
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   3ë‹¨ê³„: ZAI API í‚¤ ì…ë ¥
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
set /p ZAI_KEY="ZAI API í‚¤ ì…ë ¥: "
echo.

REM 7. SQL íŒŒì¼ ì‹¤í–‰ (pg_net í™•ì¥ í™œì„±í™” í¬í•¨)
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   4ë‹¨ê³„: SQL í•¨ìˆ˜ ë°°í¬
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

REM SQL íŒŒì¼ ë‚´ìš©ì„ ì„ì‹œ íŒŒì¼ë¡œ ìƒì„±
echo -- KBJ2 API ë°°í¬ë¥¼ ìœ„í•œ SQL > temp_deploy.sql
echo -- pg_net í™•ì¥ í™œì„±í™” >> temp_deploy.sql
echo CREATE EXTENSION IF NOT EXISTS pg_net; >> temp_deploy.sql
echo. >> temp_deploy.sql
echo -- kbj2_api.sql ë‚´ìš© ì¶”ê°€ >> temp_deploy.sql
type supabase\kbj2_api.sql >> temp_deploy.sql

echo ğŸ“œ SQL í•¨ìˆ˜ ìƒì„± ì¤‘...
supabase db execute --file temp_deploy.sql
del temp_deploy.sql
echo.

REM 8. Edge Functions ë°°í¬
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   5ë‹¨ê³„: Edge Functions ë°°í¬
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
supabase functions deploy kbj2
echo.

REM 9. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   6ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ì„¤ì •
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ğŸ”‘ ZAI_API_KEY í™˜ê²½ë³€ìˆ˜ ì„¤ì • ì¤‘...
supabase secrets set ZAI_API_KEY=%ZAI_KEY%
echo.

REM 10. ì™„ë£Œ ë° ì •ë³´ ì¶œë ¥
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   âœ… ë°°í¬ ì™„ë£Œ!
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ğŸ“ API ì—”ë“œí¬ì¸íŠ¸:
echo    REST API: https://%PROJECT_REF%.supabase.co/rest/v1/rpc/kbj2_strat
echo    Edge Function: https://%PROJECT_REF%.supabase.co/functions/v1/kbj2
echo.
echo ğŸ”‘ API í‚¤ ìœ„ì¹˜:
echo    Dashboard â†’ Settings â†’ API â†’ anon public
echo.
echo ğŸ“– ì‚¬ìš© ì˜ˆì‹œ:
echo    curl -X POST https://%PROJECT_REF%.supabase.co/rest/v1/rpc/kbj2_strat ^
echo      -H "Content-Type: application/json" ^
echo      -H "apikey: YOUR_ANON_KEY" ^
echo      -d "{\"query\":\"í…ŒìŠ¤íŠ¸\",\"context\":\"\"}"
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

pause
